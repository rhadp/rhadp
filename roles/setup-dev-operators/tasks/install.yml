# Implement your install deployment tasks here
# -------------------------------------------------

- name: install gitops operator
  include_role:
    name: roles/install-operator
  vars:
    operator_name: "openshift-gitops-operator"
    operator_subscription_name: "openshift-gitops-operator"
    subscription_channel: "{{ gitops_subscription_channel }}"
    subscription_starting_csv: "{{ gitops_subscription_starting_csv }}"
    operator_deployment_name: "openshift-gitops-operator-controller-manager"
    operator_namespace: "openshift-gitops-operator"
    operator_group_name: "openshift-gitops-operator"
    create_operator_namespace: true
    create_operator_group: true

- name: install pipelines operator
  include_role:
    name: roles/install-operator
  vars:
    operator_name: "openshift-pipelines-operator-rh"
    operator_subscription_name: "openshift-pipelines-operator"
    subscription_channel: "{{ pipelines_subscription_channel }}"
    subscription_starting_csv: "{{ pipelines_subscription_starting_csv }}"
    operator_deployment_name: "openshift-pipelines-operator"

# optional operators

- name: install devspaces operator
  when: install_devspaces | bool
  include_role:
    name: roles/install-operator
  vars:
    operator_name: "devspaces"
    operator_subscription_name: "devspaces"
    subscription_channel: "{{ devspaces_subscription_channel }}"
    subscription_starting_csv: "{{ devspaces_subscription_starting_csv }}"
    operator_deployment_name: "devspaces-operator"
    create_operator_namespace: false
    create_operator_group: false

- name: install developer hub operator
  when: install_devhub | bool
  include_role:
    name: roles/install-operator
  vars:
    operator_name: "rhdh"
    operator_subscription_name: "rhdh"
    subscription_channel: "{{ devhub_subscription_channel }}"
    subscription_starting_csv: "{{ devhub_subscription_starting_csv }}"
    operator_namespace: "rhdh-operator"
    operator_group_name: "rhdh-operator"
    create_operator_namespace: true
    create_operator_group: true

- name: install web terminal operator
  when: install_web_terminal | bool
  include_role:
    name: roles/install-operator
  vars:
    operator_name: "web-terminal"
    operator_subscription_name: "web-terminal"
    subscription_channel: "{{ web_terminal_subscription_channel }}"
    subscription_starting_csv: "{{ web_terminal_subscription_starting_csv }}"
    operator_deployment_name: "web-terminal-controller"
    create_operator_namespace: false
    create_operator_group: false